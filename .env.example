# Database Configuration
# Format: postgresql://user:password@host:port/database?schema=schema
# Recommended: Use connection pooling parameters
DATABASE_URL="postgresql://postgres:your_password@localhost:5432/umsdb?schema=public&connection_limit=20&pool_timeout=10"
# DB_CONNECTION_LIMIT: Maximum number of connections in pool (default: 20)
DB_CONNECTION_LIMIT=20
# DB_POOL_TIMEOUT: Timeout for getting a connection from pool in ms (default: 10000)
DB_POOL_TIMEOUT=10000
# DB_POOL_IDLE_TIMEOUT: Max idle time for a connection before it's closed in ms (default: 30000)
DB_POOL_IDLE_TIMEOUT=30000
# DB_STATEMENT_CACHE_SIZE: Connection statement cache size (default: 100)
DB_STATEMENT_CACHE_SIZE=100
# DB_POOL_LOGGING: Enable connection pool logging (true/false)
DB_POOL_LOGGING=false
# DB_POOL_METRICS_INTERVAL: Interval for pool metrics collection in ms (default: 60000)
DB_POOL_METRICS_INTERVAL=60000

# JWT Configuration
# IMPORTANT: Generate strong, unique secrets (64+ characters recommended)
# Use different secrets for access and refresh tokens
# Generate with: openssl rand -base64 64
JWT_SECRET="your-64-character-access-token-secret-here"
JWT_REFRESH_SECRET="your-64-character-refresh-token-secret-here"

# JWT Expiration Times
# Access tokens should be short-lived (15-30 minutes recommended)
JWT_ACCESS_EXPIRES_IN="15m"
# Refresh tokens can be longer-lived (7-30 days recommended)
JWT_REFRESH_EXPIRES_IN="7d"

# Password Hashing Configuration
# BCRYPT_ROUNDS: Number of rounds for bcrypt hashing (minimum 12 recommended)
# Higher values = more secure but slower (12 = ~250ms, 14 = ~1s)
BCRYPT_ROUNDS=12

# Rate Limiting Configuration
# DISABLE_RATE_LIMITING: Disable rate limiting entirely (true/false) - Recommended for development only
DISABLE_RATE_LIMITING=false
# RATE_LIMIT_WINDOW_MS: Time window in milliseconds (900000 = 15 minutes)
RATE_LIMIT_WINDOW_MS=900000
# RATE_LIMIT_MAX_REQUESTS: Max requests per window for general endpoints
RATE_LIMIT_MAX_REQUESTS=100
# RATE_LIMIT_AUTH_MAX_REQUESTS: Max requests per window for auth endpoints
RATE_LIMIT_AUTH_MAX_REQUESTS=5
# STRICT_RATE_LIMIT_WINDOW_MS: Time window for sensitive operations (60000 = 1 minute)
STRICT_RATE_LIMIT_WINDOW_MS=60000
# STRICT_RATE_LIMIT_MAX: Max requests per window for sensitive operations
STRICT_RATE_LIMIT_MAX=10
# RATE_LIMIT_PUBLIC_MAX_REQUESTS: Max requests per window for public endpoints
RATE_LIMIT_PUBLIC_MAX_REQUESTS=200
# RATE_LIMIT_DOCS_MAX_REQUESTS: Max requests per window for API docs endpoints
RATE_LIMIT_DOCS_MAX_REQUESTS=50
# USE_REDIS_RATE_LIMIT: Use Redis for distributed rate limiting (true/false)
USE_REDIS_RATE_LIMIT=false

# Server Configuration
# PORT: Server port (default: 3000)
PORT=3003
# NODE_ENV: Environment (development, staging, production)
NODE_ENV=development
# SERVICE_NAME: Service name for logging and monitoring
SERVICE_NAME="auth-service"
# APP_VERSION: Application version
APP_VERSION="1.0.0"

# CORS Configuration
# CORS_ORIGIN: Allowed origins for CORS (comma-separated for multiple)
CORS_ORIGIN="http://localhost:5173,https://yourdomain.com"

# Redis Configuration
# REDIS_URL: Redis connection URL
REDIS_URL="redis://localhost:6379"
# REDIS_TTL_USER: Cache TTL for user data in seconds (600 = 10 minutes)
REDIS_TTL_USER=600
# REDIS_TTL_ROLE: Cache TTL for role data in seconds (600 = 10 minutes)
REDIS_TTL_ROLE=600
# REDIS_TTL_PERMISSION: Cache TTL for permission data in seconds (3600 = 1 hour)
REDIS_TTL_PERMISSION=3600
# REDIS_TTL_TOKEN: Cache TTL for token data in seconds (60 = 1 minute)
REDIS_TTL_TOKEN=60
# REDIS_TTL_EVENT: Cache TTL for event data in seconds (604800 = 7 days)
REDIS_TTL_EVENT=604800

# Password Policy Configuration
# PASSWORD_MIN_LENGTH: Minimum password length (8 recommended)
PASSWORD_MIN_LENGTH=8
# PASSWORD_MAX_LENGTH: Maximum password length (128 recommended)
PASSWORD_MAX_LENGTH=128
# PASSWORD_REQUIRE_UPPERCASE: Require uppercase letters (true/false)
PASSWORD_REQUIRE_UPPERCASE=true
# PASSWORD_REQUIRE_LOWERCASE: Require lowercase letters (true/false)
PASSWORD_REQUIRE_LOWERCASE=true
# PASSWORD_REQUIRE_NUMBER: Require numbers (true/false)
PASSWORD_REQUIRE_NUMBER=true
# PASSWORD_REQUIRE_SPECIAL: Require special characters (true/false)
PASSWORD_REQUIRE_SPECIAL=true
# PASSWORD_SPECIAL_CHARS: Allowed special characters
PASSWORD_SPECIAL_CHARS="@$!%*?&"
# PASSWORD_MAX_HISTORY: Number of previous passwords to remember
PASSWORD_MAX_HISTORY=5
# PASSWORD_EXPIRY_DAYS: Password expiry in days (0 = never expires)
PASSWORD_EXPIRY_DAYS=0

# Event Bus Configuration
# ENABLE_EVENT_PERSISTENCE: Enable event persistence to Redis (true/false)
ENABLE_EVENT_PERSISTENCE=true
# ENABLE_EVENT_REDIS_PUB_SUB: Enable Redis Pub/Sub for distributed events (true/false)
ENABLE_EVENT_REDIS_PUB_SUB=true
# EVENT_MAX_RETRIES: Maximum retry attempts for failed events (default: 3)
EVENT_MAX_RETRIES=3
# EVENT_RETRY_DELAY_MS: Delay between event retries in ms (default: 1000)
EVENT_RETRY_DELAY_MS=1000
# EVENT_DLQ_MAX_SIZE: Maximum size of dead letter queue (default: 1000)
EVENT_DLQ_MAX_SIZE=1000
# INSTANCE_ID: Unique identifier for this instance (useful for distributed event processing)
INSTANCE_ID="instance-1"

# Logging Configuration
# LOG_LEVEL: Logging level (error, warn, info, debug)
LOG_LEVEL=info
# LOG_FORMAT: Log format (json or text)
LOG_FORMAT=json
# LOG_FILE_PATH: Path to log file (optional)
LOG_FILE_PATH="./logs"

# Health Check Configuration
# HEALTH_CHECK_TIMEOUT: Timeout for health checks in ms (default: 5000)
HEALTH_CHECK_TIMEOUT=5000
# HEALTH_CRITICAL_THRESHOLD: Number of critical failures before marking unhealthy (default: 1)
HEALTH_CRITICAL_THRESHOLD=1
# HEALTH_DEGRADED_THRESHOLD: Number of degraded checks before marking degraded (default: 1)
HEALTH_DEGRADED_THRESHOLD=1

# Monitoring Configuration (Optional)
# ENABLE_METRICS: Enable Prometheus metrics (true/false)
ENABLE_METRICS=false
# METRICS_PORT: Port for metrics endpoint (default: 9090)
METRICS_PORT=9090
# ENABLE_TRACING: Enable distributed tracing (true/false)
ENABLE_TRACING=false
# JAEGER_ENDPOINT: Jaeger tracing endpoint (if tracing enabled)
JAEGER_ENDPOINT="http://localhost:14268/api/traces"

# Cache Warming Configuration
# ENABLE_CACHE_WARMING: Enable automatic cache warming on startup (true/false)
ENABLE_CACHE_WARMING=false
# CACHE_WARMING_TENANTS: Comma-separated list of tenant IDs to warm on startup
CACHE_WARMING_TENANTS=""
# CACHE_WARMING_ALL: Warm all tenants on startup (use with caution - can be resource-intensive)
CACHE_WARMING_ALL=false
